<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gas Lift Valve Setting Depths - Graphical Method</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.2em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        .data-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #3498db;
        }
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .data-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .data-item h3 {
            color: #2980b9;
            margin-top: 0;
            font-size: 1.1em;
        }
        .chart-container {
            position: relative;
            height: 600px;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .results {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #27ae60;
            margin-top: 20px;
        }
        .valve-result {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .highlight {
            background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
            color: #2c3e50;
            font-weight: bold;
            padding: 2px 5px;
            border-radius: 3px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        tr:hover {
            background: #f5f5f5;
        }
    </style>
</head>
<body>
    <div class="container">
        <div style="text-align: center; margin-bottom: 20px; padding: 15px; background: linear-gradient(45deg, #FF6B6B, #4ECDC4); border-radius: 10px; color: white;">
            <p style="margin: 0; font-size: 1.1em;">üìã Ready to Deploy! Copy this HTML file and host it on any of the platforms mentioned below.</p>
        </div>
        <h1>üõ¢Ô∏è Gas Lift Valve Setting Depths - Graphical Method</h1>
        
        <div class="data-section">
            <h2>üìä Well Data & Design Parameters</h2>
            <div class="data-grid">
                <div class="data-item">
                    <h3>Well Configuration</h3>
                    <p><strong>Well Depth:</strong> 8,000 ft</p>
                    <p><strong>Casing:</strong> 7 inch</p>
                    <p><strong>Tubing:</strong> 2‚Öû inch</p>
                    <p><strong>Producing Interval:</strong> 8,000 - 8,050 ft</p>
                </div>
                
                <div class="data-item">
                    <h3>Pressure Data</h3>
                    <p><strong>Static Pressure:</strong> 2,125 psig</p>
                    <p><strong>Wellhead Pressure:</strong> 100 psig</p>
                    <p><strong>Gas Injection Pressure:</strong> 1,200 psig</p>
                </div>
                
                <div class="data-item">
                    <h3>Fluid Properties</h3>
                    <p><strong>Oil Production:</strong> 100 BOPD</p>
                    <p><strong>Water Production:</strong> 100 BWPD</p>
                    <p><strong>Water Cut:</strong> 50%</p>
                    <p><strong>Oil Gravity:</strong> 35¬∞ API</p>
                    <p><strong>GOR:</strong> 700 SCF/STB</p>
                </div>
                
                <div class="data-item">
                    <h3>Design Guidelines</h3>
                    <p><strong>Load Fluid Gradient:</strong> 0.465 psi/ft</p>
                    <p><strong>Gas Gradient:</strong> 0.03 psi/ft</p>
                    <p><strong>Pressure Drop (PD):</strong> 25 psi</p>
                    <p><strong>Valve Differential:</strong> 20 psi</p>
                </div>
            </div>
        </div>

        <div class="data-section">
            <h2>üìà Tubing Flowing Pressure Profile</h2>
            <table>
                <thead>
                    <tr>
                        <th>Depth (ft)</th>
                        <th>0</th>
                        <th>2,500</th>
                        <th>4,000</th>
                        <th>5,000</th>
                        <th>6,000</th>
                        <th>7,000</th>
                        <th>8,000</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Pressure (psi)</strong></td>
                        <td>100</td>
                        <td>400</td>
                        <td>600</td>
                        <td>740</td>
                        <td>880</td>
                        <td>1,030</td>
                        <td>1,200</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="chart-container">
            <canvas id="pressureChart"></canvas>
        </div>

        <div class="results">
            <h2>üéØ Calculated Valve Setting Depths</h2>
            
            <div class="valve-result">
                <h3>Valve #1 (Top Valve)</h3>
                <p><strong>Calculation Method:</strong></p>
                <ul>
                    <li>Start at wellhead pressure (100 psi)</li>
                    <li>Follow load fluid gradient line (0.465 psi/ft) to intersection with gas injection pressure (1,200 psi)</li>
                    <li>Calculate intersection: Depth = (1,200 - 100) √∑ 0.465 = 2,366 ft</li>
                    <li>Move up 20 psi for differential: 20 √∑ 0.465 = 43 ft</li>
                </ul>
                <p><strong>Setting Depth:</strong> <span class="highlight">2,323 ft</span></p>
            </div>

            <div class="valve-result">
                <h3>Valve #2</h3>
                <p><strong>Calculation Method:</strong></p>
                <ul>
                    <li>Start at tubing pressure at Valve #1 depth: ~480 psi (interpolated)</li>
                    <li>Use reduced gas injection pressure: 1,200 - 25 = 1,175 psi</li>
                    <li>Calculate intersection: Depth = (1,175 - 480) √∑ 0.465 + 2,323 = 3,817 ft</li>
                    <li>Move up 20 psi for differential: 43 ft</li>
                </ul>
                <p><strong>Setting Depth:</strong> <span class="highlight">3,774 ft</span></p>
            </div>

            <div class="valve-result">
                <h3>Valve #3</h3>
                <p><strong>Calculation Method:</strong></p>
                <ul>
                    <li>Start at tubing pressure at Valve #2 depth: ~655 psi (interpolated)</li>
                    <li>Use reduced gas injection pressure: 1,175 - 25 = 1,150 psi</li>
                    <li>Calculate intersection: Depth = (1,150 - 655) √∑ 0.465 + 3,774 = 4,839 ft</li>
                    <li>Move up 20 psi for differential: 43 ft</li>
                </ul>
                <p><strong>Setting Depth:</strong> <span class="highlight">4,796 ft</span></p>
            </div>

            <div class="valve-result">
                <h3>Valve #4 (Operating Valve)</h3>
                <p><strong>Calculation Method:</strong></p>
                <ul>
                    <li>Start at tubing pressure at Valve #3 depth: ~805 psi (interpolated)</li>
                    <li>Use reduced gas injection pressure: 1,150 - 25 = 1,125 psi</li>
                    <li>Calculate intersection: Depth = (1,125 - 805) √∑ 0.465 + 4,796 = 5,484 ft</li>
                    <li>Move up 20 psi for differential: 43 ft</li>
                </ul>
                <p><strong>Setting Depth:</strong> <span class="highlight">5,441 ft</span></p>
            </div>

            <div class="valve-result">
                <h3>üìã Summary</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Valve Number</th>
                            <th>Setting Depth (ft)</th>
                            <th>Gas Injection Pressure (psi)</th>
                            <th>Function</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>2,323</td>
                            <td>1,200</td>
                            <td>First unloading valve</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>3,774</td>
                            <td>1,175</td>
                            <td>Second unloading valve</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>4,796</td>
                            <td>1,150</td>
                            <td>Third unloading valve</td>
                        </tr>
                        <tr style="background: #e8f5e8;">
                            <td><strong>4</strong></td>
                            <td><strong>5,441</strong></td>
                            <td><strong>1,125</strong></td>
                            <td><strong>Operating valve</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Create the pressure vs depth chart
        const ctx = document.getElementById('pressureChart').getContext('2d');
        
        // Data points for tubing flowing pressure
        const tubingData = [
            {x: 100, y: 0},
            {x: 400, y: 2500},
            {x: 600, y: 4000},
            {x: 740, y: 5000},
            {x: 880, y: 6000},
            {x: 1030, y: 7000},
            {x: 1200, y: 8000}
        ];

        // Load fluid gradient line (static)
        const loadFluidData = [
            {x: 100, y: 0},
            {x: 100 + 8000 * 0.465, y: 8000}
        ];

        // Gas injection pressure lines
        const gasInjectionLines = [
            {label: '1,200 psi', pressure: 1200, color: '#e74c3c'},
            {label: '1,175 psi', pressure: 1175, color: '#f39c12'},
            {label: '1,150 psi', pressure: 1150, color: '#27ae60'},
            {label: '1,125 psi', pressure: 1125, color: '#8e44ad'}
        ];

        // Valve positions
        const valvePositions = [
            {x: 1200, y: 2323, label: 'Valve #1'},
            {x: 1175, y: 3774, label: 'Valve #2'},
            {x: 1150, y: 4796, label: 'Valve #3'},
            {x: 1125, y: 5441, label: 'Valve #4 (Operating)'}
        ];

        const datasets = [
            {
                label: 'Tubing Flowing Pressure',
                data: tubingData,
                borderColor: '#3498db',
                backgroundColor: 'rgba(52, 152, 219, 0.1)',
                borderWidth: 3,
                fill: false,
                tension: 0.4
            },
            {
                label: 'Load Fluid Gradient (0.465 psi/ft)',
                data: loadFluidData,
                borderColor: '#2c3e50',
                backgroundColor: 'transparent',
                borderWidth: 2,
                borderDash: [5, 5],
                fill: false,
                pointRadius: 0
            }
        ];

        // Add gas injection pressure lines
        gasInjectionLines.forEach(line => {
            datasets.push({
                label: `Gas Injection ${line.label}`,
                data: [
                    {x: line.pressure, y: 0},
                    {x: line.pressure, y: 8000}
                ],
                borderColor: line.color,
                backgroundColor: 'transparent',
                borderWidth: 2,
                fill: false,
                pointRadius: 0
            });
        });

        // Add valve positions
        datasets.push({
            label: 'Valve Positions',
            data: valvePositions,
            borderColor: '#e74c3c',
            backgroundColor: '#e74c3c',
            borderWidth: 2,
            pointRadius: 8,
            pointStyle: 'triangle',
            showLine: false
        });

        new Chart(ctx, {
            type: 'line',
            data: {
                datasets: datasets
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Gas Lift Valve Design Chart - Pressure vs Depth',
                        fontSize: 16,
                        fontColor: '#2c3e50'
                    },
                    legend: {
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 20
                        }
                    },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                const point = context[0];
                                return `Pressure: ${point.parsed.x} psi, Depth: ${point.parsed.y} ft`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        title: {
                            display: true,
                            text: 'Pressure (psi)',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        min: 0,
                        max: 1300,
                        grid: {
                            color: 'rgba(0,0,0,0.1)'
                        }
                    },
                    y: {
                        type: 'linear',
                        reverse: true,
                        title: {
                            display: true,
                            text: 'Depth (ft)',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        min: 0,
                        max: 8500,
                        grid: {
                            color: 'rgba(0,0,0,0.1)'
                        }
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'nearest'
                }
            }
        });
    </script>
</body>
</html>